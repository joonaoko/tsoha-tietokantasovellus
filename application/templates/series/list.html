{% extends "layout.html" %}

{% block body %}
  <table class="table">
    <thead class="thead-dark">
      <tr>
        <th>Series</th>
        <th colspan="3">Episodes Total</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    
    {% for series in series %}
    <tr>
      <td>{{ series.name }}</td>
      <td>{{ series.episodes_total }}</td>
      
      <form method="POST" action="{{ url_for('series_set_episodes_total', series_id=series.id) }}">
        <td>
          {% if current_user.role == 'ADMIN' %}
            {{ form.episodes_total(class_='form-control') }}
          {% endif %}
        </td>
        <td>
          {% if current_user.role == 'ADMIN' %}
          <input class="btn btn-dark" type="submit" value="Update"/>
          {% endif %}
        </td>
      </form>
      <td>
        {% if current_user.role == 'ADMIN' %}
        <form method="POST" action="{{ url_for('series_delete', series_id=series.id) }}">
          <input class="btn btn-danger" type="submit" value="Delete"/>
        </form>
        {% endif %}
      </td>
      <td>
        <form method="POST" action="{{ url_for('series_add_to_userseries', series_id=series.id) }}">
          <input class="btn btn-dark" type="submit" value="Add to watchlist"/>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>
  <ul>
    {% for error in form.episodes_total.errors %}
    <li>{{ error }}</li>
    {% endfor %}
  </ul>
{% endblock %}